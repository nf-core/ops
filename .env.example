# nf-core Hackathon Infrastructure Configuration
# ===============================================
#
# This project uses 1Password Environments to manage secrets and configuration.
# The .env file is automatically populated by 1Password.
#
# IMPORTANT: All variables use TF_VAR_ prefix for direct Terraform compatibility.
# The .envrc file (via direnv) automatically derives non-prefixed versions for
# scripts that need them (AWS CLI, helper scripts, etc.).
#
# Setup Instructions:
# -------------------
# 1. Install 1Password desktop app (https://1password.com/downloads)
# 2. Sign in to your 1Password account
# 3. Go to Developer > Environments in the 1Password app
# 4. Create a new environment (or use existing "Hackathon WorkAdventure")
# 5. Add the variables below with your values (use TF_VAR_ prefix!)
# 6. Click "Mount" and select this project directory
# 7. 1Password will create and manage the .env file automatically
#
# direnv Setup (recommended for automatic loading):
# -------------------------------------------------
# 1. Install direnv: brew install direnv
# 2. Add to shell: echo 'eval "$(direnv hook zsh)"' >> ~/.zshrc
# 3. Reload shell: source ~/.zshrc
# 4. Allow this project: direnv allow
#
# Now variables load automatically when you cd into the project!
#
# ============================================================================
# AWS CONFIGURATION
# ============================================================================

TF_VAR_AWS_PROFILE=your-aws-profile
TF_VAR_AWS_REGION=eu-west-1

# ============================================================================
# DOMAIN CONFIGURATION
# ============================================================================

TF_VAR_DOMAIN=hackathon.example.com
TF_VAR_ROUTE53_ZONE_ID=Z0123456789ABCDEFGHIJ

# ============================================================================
# PROJECT CONFIGURATION
# ============================================================================

TF_VAR_PROJECT_NAME=my-hackathon
TF_VAR_SSH_KEY_NAME=my-ssh-key
TF_VAR_ADMIN_EMAIL=admin@example.com

# ============================================================================
# SECRETS (sensitive, auto-generated)
# ============================================================================
# Generate these with: openssl rand -hex 32 (or -hex 16 for API key)

TF_VAR_WORKADVENTURE_SECRET_KEY=<64-char-hex-string>
TF_VAR_LIVEKIT_API_KEY=<32-char-hex-string>
TF_VAR_LIVEKIT_API_SECRET=<64-char-hex-string>
TF_VAR_COTURN_SECRET=<64-char-hex-string>
TF_VAR_JITSI_SECRET=<64-char-hex-string>

# ============================================================================
# GitHub OAuth Authentication
# ============================================================================
# Only nf-core GitHub organization members can access the hackathon.
#
# Setup:
# 1. Go to: https://github.com/organizations/nf-core/settings/applications
# 2. Click "New OAuth App"
# 3. Fill in:
#    - Application name: nf-core Hackathon WorkAdventure
#    - Homepage URL: https://app.<your-domain>
#    - Authorization callback URL: https://app.<your-domain>/oauth2/callback
# 4. Copy the Client ID and Client Secret below
#
TF_VAR_GITHUB_OAUTH_CLIENT_ID=<from-github-oauth-app>
TF_VAR_GITHUB_OAUTH_CLIENT_SECRET=<from-github-oauth-app>

# IMPORTANT: oauth2-proxy requires a 16, 24, or 32 byte secret
# Generate with: openssl rand -hex 16  (produces 32 hex chars = 16 bytes)
# Do NOT use base64 encoding - use hex format only
TF_VAR_OAUTH2_PROXY_COOKIE_SECRET=<32-char-hex-string-from-openssl-rand-hex-16>

# ============================================================================
# SSH Key (stored separately in 1Password)
# ============================================================================
# The SSH key is stored separately in 1Password and used via the SSH agent.
#
# To enable SSH keys from your vault, create ~/.config/1password/ssh/agent.toml:
#
#   [[ssh-keys]]
#   vault = "Dev"
#
# Then verify with: ssh-add -l
#
# See: https://developer.1password.com/docs/ssh/agent/config
