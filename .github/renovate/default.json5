{
    $schema: "https://docs.renovatebot.com/renovate-schema.json",
    extends: ["config:best-practices", ":automergeDigest", ":automergeBranch"],
    vulnerabilityAlerts: {
        labels: ["security"],
        schedule: "at any time",
    },
    prHourlyLimit: 3,
    platform: "github",
    onboarding: false,
    dependencyDashboard: true,
    dependencyDashboardTitle: "Renovate Dashboard ðŸ¤–",
    suppressNotifications: ["prIgnoreNotification"],
    rebaseWhen: "conflicted",
    reviewers: ["edmundmiller"],
    assigneesFromCodeOwners: true,
    gitAuthor: "nf-core-bot <renovate@nf-co.re>",
    "pre-commit": {
        enabled: true,
    },
    customManagers: [
        {
            customType: "regex",
            description: "Process Containers dependencies",
            fileMatch: ["(^|/)main\\.nf$"],
            matchStrings: [
                "\\s+'(?<depName>\\S+):(?<currentValue>.*\\-.*)' }\"\n",
            ],
            datasourceTemplate: "docker",
        },
        {
            customType: "regex",
            description: "Upgrade conda dependencies",
            fileMatch: ["(^|/)environment(.*).ya?ml$"],
            matchStrings: [
                "#\\s*renovate\\s+datasource=conda\\s+depName=(?<depName>.*?)\\s+-\\s*[\\w-]+\\s*==?\\s*\"?(?<currentValue>.*)\"?",
                "# renovate: datasource=conda depName=(?<depName>.*?)\\s+-\\s*[\\w-]+\\s*==?\\s*\"?(?<currentValue>.*)\"?"
            ],
            datasourceTemplate: "conda"
        },
        {
            customType: "regex",
            description: "Upgrade pypi dependencies inside conda environment files",
            fileMatch: ["(^|/)environment(.*).ya?ml$"],
            matchStrings: [
                "# renovate datasource=pypi\\s+-\\s*(?<depName>[\\w-]+)\\s*(\\[[\\w,\\s]+\\])?\\s*==?\\s*(?<currentValue>.*)",
                "# renovate: datasource=pypi\\s+-\\s*(?<depName>[\\w-]+)\\s*(\\[[\\w,\\s]+\\])?\\s*==?\\s*(?<currentValue>.*)"
            ],
            datasourceTemplate: "pypi"
        },
    ],
    packageRules: [
        {
            matchDatasources: ["docker"],
            registryUrls: ["quay.io"],
        },
        {
            matchManagers: ["github-actions"],
            groupName: "GitHub Actions",
            automerge: true,
            schedule: ["before 9am"],
        },
        // don't use digest for actions coming from seqera(labs) or nf-core
        {
            matchPackagePattern: ["^nf-core/", "^seqera"],
            matchManagers: ["github-actions"],
            automerge: true,
            pinDigest: false,
        },
    ],
}
