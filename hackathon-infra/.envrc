# direnv configuration for hackathon-terraform
# =============================================
#
# Setup:
#   1. Install direnv: brew install direnv
#   2. Add to shell: echo 'eval "$(direnv hook zsh)"' >> ~/.zshrc
#   3. Reload shell: source ~/.zshrc
#   4. Allow this file: direnv allow
#
# The .env file is managed by 1Password Environments and kept in sync automatically.
# All variables use TF_VAR_* prefix for direct Terraform compatibility.

# 1Password creates .env as a named pipe (FIFO), not a regular file.
# direnv's dotenv can't read from pipes, so we copy to .env.tmp first.
if [[ -e .env ]]; then
    cat .env > .env.tmp
    dotenv .env.tmp
fi

# AWS CLI requires AWS_PROFILE and AWS_REGION (without TF_VAR_ prefix)
# Derive these from the Terraform variables for CLI compatibility
export AWS_PROFILE="${TF_VAR_AWS_PROFILE:-}"
export AWS_REGION="${TF_VAR_AWS_REGION:-}"
